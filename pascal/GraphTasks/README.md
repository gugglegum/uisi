Работа с графами
================

*Курсовая работа по предмету "Структуры и алгоритмы обработки данных" на 3-м курсе УрТИСИ в 2013 г. (Екатеринбург)*

Автор: Павел Мелехов &lt;gugglegum на gmail точка com&gt;

**ВНИМАНИЕ: Текущая версия реализует функционал для ОРИЕНТИРОВАННЫХ взвешенных графов.**

Исходный код подготовлен для компилятора Free Pascal Compiler (http://www.freepascal.org/), проверен на версии 2.6.2 под Windows и Linux. Лично я использовал FPC, идущий вместе со средой разработки Lazarus (http://www.lazarus.freepascal.org/). Для компиляции программы можно открыть программу в Lazarus IDE (файл GraphTasks.pas) и нажать Ctrl-F9, но лично я предпочитаю компилировать из командной строки. Для этого надо запускать скрипт build.cmd (Windows) или build.sh (Linux). Под Windows необходимо добавить каталог с FPC в переменную окружения PATH, чтобы его можно было запускать без явного указания пути, либо добавить этот путь в cmd-файл перед fpc.exe. При использовании Lazarus IDE, идущий с ней компилятор может лежать, например, здесь: C:\lazarus\fpc\2.6.2\bin\x86_64-win64. Вы также можете скачать FPC отдельно без Lazarus.

Использование командной строки более удобно, т.к. программа получает входные данные через параметры, передаваемые в командной строке после имени исполняемого файла (обычно это удобнее, чем каждый раз вводить их с клавиатуры). Параметры перечисляются через пробел. Программа ожидает первым параметром число с номером задачи от 1 до 8 (см. задание); вторым параметром ожидает имя файла с исходным графом. Если второй параметр отсутствует, то данные графа ожидаются в STDIN. Результат своей работы программа выводит в STDOUT. В задачах 3 и 5 для работы требуется дополнительно определить номер исходной вершины графа, этот номер задаётся через дополнительный параметр --from-point=N, где N - номер вершины. Пример запуска программы для задачи №5 (поиск наименьшего пути от заданной вершины до всех остальных):

`GraphTasks.exe 5 tests\graph1.txt --from-point=5`

Результат работы этой команды будет выглядеть так:


    5 .. 1 : 5 -> 6 -> 7 -> 1 (weight: 6)
    5 .. 2 : 5 -> 6 -> 7 -> 1 -> 2 (weight: 7)
    5 .. 3 : 5 -> 6 -> 7 -> 1 -> 2 -> 3 (weight: 8)
    5 .. 4 : 5 -> 6 -> 7 -> 1 -> 2 -> 3 -> 4 (weight: 9)
    5 .. 6 : 5 -> 6 (weight: 2)
    5 .. 7 : 5 -> 6 -> 7 (weight: 4)


Файл с графом представляет собой текстовый файл, содержащий по 3 целых числа в каждой строке, разделённых пробелом. Каждая строка задаёт одно ребро в графе. Первые 2 числа - номера вершин ребра, а 3-е число - вес ребра. В задачах на поиск циклов и путей учитываются именно суммарный вес рёбер, а не их кол-во. Кол-во вершин определяется автоматически, исходя из наибольшего номера вершины в рёбрах.

Проект включает в себя средство автоматического тестирования программы. Это набор тестов, похожих на Unit-тесты, которые выполняются все вместе и по результату их выполнения можно с большой степенью уверенности сказать правильно работает программа или нет. Работают тесты очень просто: программа запускается с различными заранее подготовленными параметрами, максимально покрывающими все возможные варианты, а результат её работы сравнивается с ожидаемым (заранее расчитанным и проверенным). Основная польза таких тестов в том, что они позволяют всего за пару секунд убедиться в том, что программа по-прежнему работает правильно после каких-то ваших изменений в ней. Для запуска тестов нужно запускать tests.cmd или tests.sh. Само тестирование выполняется скриптом на языке PHP, поэтому он должен быть установлен на компьютере и путь к нему должен быть прописан в PATH. Требуется PHP версии 5.4 или выше. При нормальной работе скрипт тестирования выводит "." на каждый успешно пройденный тест и "E" на каждый не пройденный тест.

Структурно программа разбита на несколько модулей, содержащих классы для более удобного восприятия. При этом каждая задача вынесена в отдельный модуль (Unit) для того, чтобы из программы легко можно было выкинуть лишние задания, которые не требуются в вашем варианте, или добавить какие-то новые, не переписывая существенно остальной код. Граф в программе представлен в виде объекта класса TGraph, который содержит приватные свойства с данными графа и набор методов для наполнения (загрузки) графа и его обхода. Программисту не нужно заботиться о внутреннем представлении данных графа, достаточно правильно использовать публичные методы. Например, метод HasEdge позволяет проверить наличие ребра между 2 вершинами, а GetNumPoints возвращает число вершин в графе.
